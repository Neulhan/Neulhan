<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" href="../favicon.ico" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="preconnect" href="https://cdn.jsdelivr.net" />
        <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
        <link
            href="https://cdn.jsdelivr.net/gh/toss/tossface/dist/tossface.css"
            rel="stylesheet"
            type="text/css"
        />
        <!-- Google tag (gtag.js) -->
        <script
            async
            src="https://www.googletagmanager.com/gtag/js?id=G-TQE5NFT4DN"
        ></script>
        <script>
            window.dataLayer = window.dataLayer || []
            function gtag() {
                dataLayer.push(arguments)
            }
            gtag('js', new Date())

            gtag('config', 'G-TQE5NFT4DN')
        </script>

        
		<link href="../_app/immutable/assets/0.02b6b099.css" rel="stylesheet">
		<link href="../_app/immutable/assets/3.23bda755.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.167a88c1.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/scheduler.7c4769d9.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/singletons.79df3d64.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/control.f5b05b5f.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.4bc59368.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/preload-helper.a4192956.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.cc557082.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.1176bf89.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/each.e59479a4.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/3.db40cf1f.js"><title>rust wasm-pack malloc error</title><!-- HEAD_svelte-15uyux5_START --><meta property="og:type" content="article"><meta property="og:title" content="rust wasm-pack malloc error"><meta property="og:image" content="https://neulhan-blog.s3.ap-northeast-2.amazonaws.com/images/rust-wasm-pack-malloc-error/2024-04-03-09-41-53.png"><!-- HEAD_svelte-15uyux5_END -->
    </head>
    <body data-sveltekit-preload-data="hover">
        <div style="display: contents">  <div class="app flex flex-col"><div class="bg-white w-full p-4 shrink-0 flex justify-between content-center border-b border-slate-200"><div class="logo" data-svelte-h="svelte-1lqcucv"><a href="/" class="font-semibold text-2xl flex flex-nowrap"><span class="tf mr-2">ğŸ¦‰</span> ê°œë°œì ëŠ˜í•œ</a></div> <nav class="flex"><a class="flex items-center py-1 px-2 hover:bg-slate-100 cursor-pointer" href="https://github.com/Neulhan" target="_blank"><img class="rounded-2xl w-6 mr-2" src="https://github.githubassets.com/assets/GitHub-Mark-ea2971cee799.png" alt="ëŠ˜í•œ ì†Œê°œ"> ì†Œê°œ </a><a class="flex items-center py-1 px-2 hover:bg-slate-100 cursor-pointer" href="https://velog.io/@neulhan" target="_blank"><img class="rounded-2xl w-6 mr-2" src="https://images.velog.io/images/wwwssj0309/post/e2262211-93c1-46a2-b72c-345c5c22a683/1.jpg" alt="ëŠ˜í•œ ì˜ˆì „ ë¸”ë¡œê·¸"> ì˜ˆì „ ë¸”ë¡œê·¸ </a></nav> </div> <main> <article class="container p-4 sm:p-12 mx-auto max-w-3xl bg-white"><div class="content-head"><div class="flex"> <h1 class="text-4xl pb-2 font-semibold"><span class="tf">ğŸ˜±</span> rust wasm-pack malloc error</h1></div> <p class="opacity-50 pb-2">2024-04-02</p></div> <div class="my-4 flex gap-1"><div class="rounded-md bg-slate-50 border border-slate-200 px-0.5 text-sm text-slate-500"># rust </div><div class="rounded-md bg-slate-50 border border-slate-200 px-0.5 text-sm text-slate-500"># wasm </div><div class="rounded-md bg-slate-50 border border-slate-200 px-0.5 text-sm text-slate-500"># debugging </div></div> <div class="content-container md py-4 svelte-a35t19"><p data-svelte-h="svelte-1a4iofz"><img src="https://neulhan-blog.s3.ap-northeast-2.amazonaws.com/images/rust-wasm-pack-malloc-error/2024-04-03-09-41-53.png"></p> <p data-svelte-h="svelte-m325e8">ì•„ë˜ ëª…ë ¹ì–´ë¡œ rust í”„ë¡œì íŠ¸ë¥¼ ë²ˆë“¤ë§, npm ì— ë°°í¬í•´ì„œ ì‚¬ìš©í•´ì™”ë‹¤.</p> <pre class="language-shell"><!-- HTML_TAG_START --><code class="language-shell">wasm-pack build <span class="token parameter variable">--release</span> <span class="token parameter variable">--target</span> bundler</code><!-- HTML_TAG_END --></pre> <br> <h2 data-svelte-h="svelte-1moqm8h">ë¬¸ì œë°œìƒ</h2> <p data-svelte-h="svelte-rvvfjc">ê·¼ë° npm ë°°í¬ ì—†ì´ ë¹Œë“œ ê²°ê³¼ë¬¼ì„ index.html ì—ì„œ ë¶ˆëŸ¬ì™€ì„œ í…ŒìŠ¤íŠ¸í•˜ë ¤ë‹ˆê¹ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ ë°œìƒ</p> <pre class="language-undefined"><!-- HTML_TAG_START --><code class="language-undefined">Uncaught TypeError: malloc is not a function
    at passStringToWasm0 (fallingrs_bg.js:144:21)
    at new FallingConfig (fallingrs_bg.js:261:22)
    at new FallingJS (index.js:19:7)
    at index.html:35:25</code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-17ig78t"><img src="https://neulhan-blog.s3.ap-northeast-2.amazonaws.com/images/rust-wasm-pack-malloc-error/2024-04-02-11-04-34.png"></p> <br> <p data-svelte-h="svelte-v7bx4i">?? ë©€ì©¡íˆ ë˜ë˜ë†ˆì´ ì™œì´ë˜?</p> <p data-svelte-h="svelte-cazd1f"><img src="https://neulhan-blog.s3.ap-northeast-2.amazonaws.com/images/rust-wasm-pack-malloc-error/2024-04-02-11-13-25.png"></p> <pre class="language-js"><!-- HTML_TAG_START --><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">FallingConfig</span> <span class="token punctuation">&#123;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>
        <span class="token parameter">frequency<span class="token operator">...</span></span>
    <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> ptr0 <span class="token operator">=</span> <span class="token function">passStringToWasm0</span><span class="token punctuation">(</span>
            color<span class="token punctuation">,</span>
            wasm<span class="token punctuation">.</span>__wbindgen_malloc<span class="token punctuation">,</span>
            wasm<span class="token punctuation">.</span>__wbindgen_realloc
        <span class="token punctuation">)</span>
        <span class="token keyword">const</span> len0 <span class="token operator">=</span> <span class="token constant">WASM_VECTOR_LEN</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-1aervrl"><code>passStringToWasm0</code> ì„ í•  ë•Œ ì‚¬ìš©í•˜ëŠ” <code>wasm.__wbindgen_malloc</code> ì´ undefined ë¡œ ë‚˜ì˜¤ëŠ” ì´ìŠˆì´ë‹¤.</p> <br> <br> <br> <h2 data-svelte-h="svelte-11ar0pq">í•´ê²°</h2> <p data-svelte-h="svelte-x4yshe">ì´ê²ƒì €ê²ƒ í•´ë³´ë‹¤ ì•„ë˜ ëª…ë ¹ì–´ë¡œ ë°”ê¿”ì£¼ê³  ì½”ë“œë¥¼ ì•½ê°„ ìˆ˜ì •í•˜ë‹ˆ í•´ê²°</p> <h3 data-svelte-h="svelte-o5y0b5">1. ë¹Œë“œ íƒ€ê²Ÿ ë³€ê²½</h3> <pre class="language-shell"><!-- HTML_TAG_START --><code class="language-shell">wasm-pack build <span class="token parameter variable">--dev</span> <span class="token parameter variable">--target</span> web</code><!-- HTML_TAG_END --></pre> <br> <br> <br> <p data-svelte-h="svelte-1npvbrr">wasm-pack build â€”target ì˜µì…˜ì˜ <code>bundler</code> ì™€ <code>web</code> ì€ ì•„ë˜ì™€ ê°™ì€ ì°¨ì´ê°€ ìˆë‹¤ê³  í•œë‹¤.</p> <table data-svelte-h="svelte-3aqbrk"><thead><tr><th>Option</th> <th>Usage</th> <th>Description</th></tr></thead> <tbody><tr><td><code>bundler</code></td> <td>Bundler</td> <td>Outputs JS that is suitable for interoperation with a Bundler like Webpack. Youâ€™ll import the JS and the module key is specified in package.json. sideEffects: false is by default.</td></tr> <tr><td><code>web</code></td> <td>Native in browser</td> <td>Outputs JS that can be natively imported as an ES module in a browser, but the WebAssembly must be manually instantiated and loaded.</td></tr></tbody></table> <br> <br> <p data-svelte-h="svelte-if6f1k">npm ì—ëŠ” bundler ì˜µì…˜ìœ¼ë¡œ fallingrs ë¥¼ ë°°í¬í–ˆì—ˆê³ ,<br>
fallingjs ì—ì„œ dependency ë¡œ ê°€ì ¸ì™€ì„œ webpack ìœ¼ë¡œ ë²ˆë“¤ë§ì„ í–ˆê¸° ë•Œë¬¸ì— ì˜ ë™ì‘í•œ ê²ƒì´ë‹¤.</p> <p data-svelte-h="svelte-okln8t">ê·¸ëŸ°ë° ë²ˆë“¤ë§ ì—†ì´ ê·¸ëƒ¥ ì‚¬ìš©í•˜ë ¤ë‹ˆ ë¬¸ì œê°€ ë°œìƒí•œ ê²ƒ.</p> <br> <br> <h3 data-svelte-h="svelte-1owh1i7">2. ì½”ë“œ ìˆ˜ì •</h3> <p data-svelte-h="svelte-291bgc"><img src="https://neulhan-blog.s3.ap-northeast-2.amazonaws.com/images/rust-wasm-pack-malloc-error/2024-04-03-09-03-14.png"></p> <p data-svelte-h="svelte-5p5mc3">wasm-pack ì˜ ë¹Œë“œ íƒ€ê²Ÿì´ web ì¸ ê²½ìš° wasm ì´ init ë˜ëŠ” ê±¸ ì²´í¬í•˜ê³  ì´í›„ì— wasm ì½”ë“œë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.</p> <p data-svelte-h="svelte-1fouch8">ë¹Œë“œ íƒ€ê²Ÿì„ bundler ë¡œ í•˜ê³  webpack ìœ¼ë¡œ ë²ˆë“¤ë§ ë˜ëŠ” ê²½ìš°ì—ëŠ” ì´ì™€ê°™ì€ init ì½”ë“œ ì—†ì´ë„ ì˜ ë™ì‘í–ˆëŠ”ë°, íƒ€ê²Ÿ web ì˜ ê²½ìš° init ì´ í•„ìˆ˜ì¸ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.</p></div> <hr> <div class="flex justify-between flex-col sm:flex-row sm:content-start"><button data-svelte-h="svelte-gz3tfw"><span class="tf">ğŸ‘ˆ</span> ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button> <button class="sm:mt-0 mt-2 relative" data-svelte-h="svelte-1x325mu"><span class="tf pointer-events-none">ğŸ˜</span> ë¶€ì¡±í•œ ê¸€ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤</button></div> <hr> <script src="https://giscus.app/client.js" data-repo="Neulhan/Neulhan" data-repo-id="MDEwOlJlcG9zaXRvcnkyODc0NzE2OTA=" data-category="Announcements" data-category-id="DIC_kwDOESJ4Ss4CeXnk" data-mapping="title" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="ko" data-loading="lazy" crossorigin="anonymous" async data-svelte-h="svelte-1yl8hiy"></script> </article></main> </div> 
			
			<script>
				{
					__sveltekit_17n9epm = {
						base: new URL("..", location).pathname.slice(0, -1),
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("../_app/immutable/entry/start.167a88c1.js"),
						import("../_app/immutable/entry/app.4bc59368.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 3],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
    </body>
</html>
